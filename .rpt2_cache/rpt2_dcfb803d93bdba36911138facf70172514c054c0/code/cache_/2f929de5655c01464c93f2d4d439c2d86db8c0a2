{"code":"import * as tslib_1 from \"tslib\";\r\n/* eslint-disable react/prop-types */\r\nimport * as React from 'react';\r\nimport { adapters } from './adapters';\r\nexport default function (name, defaultValue, adapter, extractSetStateFunc) {\r\n    if (defaultValue === void 0) { defaultValue = {}; }\r\n    if (adapter === void 0) { adapter = 'memory'; }\r\n    var Context = React.createContext({});\r\n    var Provider = Context.Provider;\r\n    var ContextHoc = /** @class */ (function (_super) {\r\n        tslib_1.__extends(ContextHoc, _super);\r\n        function ContextHoc(props) {\r\n            var _this = _super.call(this, props) || this;\r\n            if (!adapters[adapter]) {\r\n                throw new Error(\"KV Store:\\n Uncaught ReferenceError: \" + adapter + \" Adapter is not defined.\");\r\n            }\r\n            _this.state = tslib_1.__assign({}, defaultValue, adapters[adapter].get(name));\r\n            extractSetStateFunc(name, function (store, callback) {\r\n                _this.setState(store, function () {\r\n                    adapters[adapter].set(name, _this.state);\r\n                    if (typeof callback === 'function') {\r\n                        callback();\r\n                    }\r\n                });\r\n            });\r\n            return _this;\r\n        }\r\n        ContextHoc.prototype.render = function () {\r\n            return (React.createElement(Provider, { value: this.state }, this.props.children));\r\n        };\r\n        return ContextHoc;\r\n    }(React.Component));\r\n    var Factory = /** @class */ (function () {\r\n        function Factory() {\r\n        }\r\n        Object.defineProperty(Factory.prototype, \"ctx\", {\r\n            get: function () {\r\n                return Context;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Factory.prototype, \"component\", {\r\n            get: function () {\r\n                return ContextHoc;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return Factory;\r\n    }());\r\n    return new Factory();\r\n}\r\n//# sourceMappingURL=factory.js.map","map":"{\"version\":3,\"file\":\"factory.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/factory.tsx\"],\"names\":[],\"mappings\":\";AAAA,qCAAqC;AACrC,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAC;AAEtC,MAAM,CAAC,OAAO,WAAW,IAAY,EAAE,YAAiB,EAAE,OAAkB,EAAE,mBAA6B;IAApE,6BAAA,EAAA,iBAAiB;IAAE,wBAAA,EAAA,kBAAkB;IAC1E,IAAM,OAAO,GAAG,KAAK,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;IAChC,IAAA,2BAAQ,CAAa;IAE7B;QAAyB,sCAAe;QACtC,oBAAY,KAAU;YAAtB,YACE,kBAAM,KAAK,CAAC,SAmBb;YAjBC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;gBACtB,MAAM,IAAI,KAAK,CAAC,0CAAwC,OAAO,6BAA0B,CAAC,CAAC;aAC5F;YAED,KAAI,CAAC,KAAK,wBACL,YAAY,EACZ,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAC/B,CAAC;YAEF,mBAAmB,CAAC,IAAI,EAAE,UAAC,KAAU,EAAE,QAAkB;gBACvD,KAAI,CAAC,QAAQ,CAAC,KAAK,EAAE;oBACnB,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,KAAI,CAAC,KAAK,CAAC,CAAC;oBACxC,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;wBAClC,QAAQ,EAAE,CAAC;qBACZ;gBACH,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;;QACL,CAAC;QAED,2BAAM,GAAN;YACE,OAAO,CACL,oBAAC,QAAQ,IAAC,KAAK,EAAE,IAAI,CAAC,KAAK,IACvB,IAAI,CAAC,KAAK,CAAC,QAAQ,CACZ,CACZ,CAAC;QACJ,CAAC;QACH,iBAAC;IAAD,CAAC,AA9BD,CAAyB,KAAK,CAAC,SAAS,GA8BvC;IAED;QAAA;QAQA,CAAC;QAPC,sBAAI,wBAAG;iBAAP;gBACE,OAAO,OAAO,CAAC;YACjB,CAAC;;;WAAA;QAED,sBAAI,8BAAS;iBAAb;gBACE,OAAO,UAAU,CAAC;YACpB,CAAC;;;WAAA;QACH,cAAC;IAAD,CAAC,AARD,IAQC;IAED,OAAO,IAAI,OAAO,EAAE,CAAC;AACvB,CAAC\"}"}
